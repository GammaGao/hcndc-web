# 网状分布式调度平台——执行端
[HCNDC-exec](https://github.com/laixin86714802/HCNDC-exec.git)

# 需求文档链接
[需求文档链接](./README.md)

# 一、配置执行服务器

## 1.说明描述
* hcndc-web  ---- web服务(master服务)
* hcndc-exec ---- exec服务(执行服务)
* web服务管理所有的exec执行服务, 所有的任务调度和执行都会分发到执行服务进行
* web所在master服务器能够ping通所有部署exec执行服务器
* 在需要执行任务的服务器上部署exec服务
## 2.项目配置
* 在执行服务器上部署并启动`hcndc-exec`服务, 默认端口`7890`, 请确保该端口未被占用
* 如需更改端口,  请确保hcndc-web服务和hcndc-exec服务superconf.json文件配置中exec.port端口一致, 并**重启所有机器上的hcndc-web和hcndc-exec服务**
## 3.web配置
`基础配置-新增执行服务器`
![](/x_other/新增执行服务器.png)

新增服务器IP(也可填写服务器域名, 确保web所在服务器有域名映射即可)和自定义服务器名称

# 二、配置接口
## 1.说明描述
* 接口模块相当于一般调度系统中的任务流概念, 用于把多个任务串联在一起, 实现各个任务之间的依赖关系
* 接口列表可以查看该接口下的任务依赖关系
![](/x_other/任务依赖.png)
## 2.web配置
`任务总览-新增接口`
![](/x_other/新增接口.png)

# 三、配置任务
## 1.说明描述
* 任务配置需要选择其所属接口
* 一个任务只能属于一个接口
* 不同接口之间的任务可以互相依赖
* 任务执行方式为命令行执行
* 环境变量为启动该服务的用户所属的环境变量
* 依赖任务为执行该任务前的前置任务, 可以多选
* 任务列表可以手动单独触发, 不用考虑前置任务是否完成
## 2.web配置
`任务总览-新增任务`
![](/x_other/新增接口.png)

# 四、配置调度
## 1.说明描述
* 调度系统是基于接口进行定时任务触发的
* 目前只支持cron表达式触发
* 调度列表可以进行立即执行、恢复、暂停调度等功能
* 一个接口只能配置一个调度任务, 不能重复配置
## 2.web配置
`调度总览-新增调度`
![](/x_other/新增调度.png)

# 五、运行日志
`调度总览-执行列表`
* 可以查看每一次执行任务日志, 包括手动执行和调度执行
* 执行详情中有网络拓扑、任务列表、运行日志等功能
![](/x_other/执行列表.png)
